<script src="https://cdn.socket.io/4.5.0/socket.io.min.js" integrity="sha384-7EyYLQZgWBi67fBtVxw60/OWl1kjsfrPFcaU0pp0nAh+i8FD068QogUvg85Ewy1k" crossorigin="anonymous"></script>

<style>
    li {
        border: 1px solid rgb(255, 255, 255);
        list-style-type: none;
        margin: 2px 0;
        padding: 3px 8px;   
    }
    ul {
        padding-right: 10px;
        padding-left: 10px;
    }
    .him {
        float: left;
        border-radius: 10px 10px 10px 10px;
        clear: both;
        background: #d1d1d1;
    }
    .me {
        float: right;
        border-radius: 10px 10px 10px 10px;
        clear: both;
        background: #008cff;
        color: #ffffff;
    }
    /* #form { background: rgba(0, 0, 0, 0.15); padding: 0.25rem; position: fixed; bottom: 0; left: 0; right: 0; display: flex; height: 3rem; box-sizing: border-box; backdrop-filter: blur(10px); } */
    #form { background: rgba(0, 0, 0, 0.15); padding: 0.25rem; position: fixed; bottom: 0; display: flex; height: 3rem; box-sizing: border-box; backdrop-filter: blur(10px); }
    .column::-webkit-scrollbar {
        display: none;
    }
</style>
<style>
    .column {
        float: left;
        text-align:center;
        width: 50%;
        overflow-y: scroll;
    }
    .row:after {
        content: "";
        display: table;
        clear: both;
    }
</style>

<div class="row" style="background-color:#ff5454; height: 100%;">
    <div class="column" style="background-color:#ffffff; height: 100%; ">
        <h2>MorseMate</h2>
    </div>
    <div class="column" style="background-color:#e9e9ff;height: 90%;">
        <ul id="chat">
            <li class="him start end">By Other User</li>
            <li class="him">By Other User</li>
            <li class="him end">By Other User</li>
            <li class="me">By this User, first message</li>
        </ul>
        <form id="form" action="">
            <input id="input" autocomplete="off" /><button>Send</button>
        </form>
    </div>
</div>

<script>
    function addChat(text, side=0) {
        var ul = document.getElementById("chat");
        var li = document.createElement("li");
        li.appendChild(document.createTextNode(text));
        if(side == 0) li.setAttribute("class", "me"); // added line
        else li.setAttribute("class", "him"); // added line
        ul.appendChild(li);
    }
    addChat("hello", 0);
    addChat("hello", 0);
    addChat("hello", 1);
    addChat("hello", 1);
    addChat("hello");
</script>

<script>
    var socket = io();

    var messages = document.getElementById('chat');
    var form = document.getElementById('form');
    var input = document.getElementById('input');

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        if (input.value) {
        socket.emit('chat message', input.value);
        input.value = '';
        }
    });

    socket.on('chat message', function(msg) {
        addChat(msg);
        window.scrollTo(0, document.body.scrollHeight);
    });
</script>