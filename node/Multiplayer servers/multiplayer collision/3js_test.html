<html>
	<link rel="apple-touch-icon" sizes="128x128" href="/html/img/Boxes3.png">
	<link rel="icon" href="/html/img/Boxes3.png">
	<head>
		<title>Felipe</title>
		<style>
			body { margin: 0; }
			canvas {width: 100%; height: 100%}
		</style>
	</head>

	<body>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r79/three.min.js"></script>
		<script>
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight, 0.1, 1000);
			var renderer = new THREE.WebGLRenderer();
			camera.position.z = 15;
			renderer.setSize(window.innerWidth, window.innerHeight);
			document.body.appendChild(renderer.domElement);
			var globalt = 0;

			window.addEventListener('resize', function(){
				var width = window.innerWidth;
				var height = window.innerHeight;
				renderer.setSize(width, height);
				camera.aspect = width/height;
				camera.updateProjectionMatrix();
			});

			const light_hem = new THREE.HemisphereLight(
				'white', // bright sky color
				'darkslategrey', // dim ground color
				1, // intensity
			);

			var light = new THREE.PointLight(
				'white', // light color
				10, // numeric value of the light's strength/intensity. Default is 1.
			);
			light.position.set(10, 10, 10);
			scene.add(light);

			var light_ambient = new THREE.AmbientLight( 0x404040, 5 ); // soft white light
			scene.add( light_ambient );

			var lightboxgeo = new THREE.BoxGeometry(0.1,0.1,0.1);
			var lightboxmat = new THREE.MeshBasicMaterial({ color:0xFFFFFF, wireframe:true});
			var lightbox = new THREE.Mesh(lightboxgeo, lightboxmat);
			scene.add(lightbox);
			function makePivotTemplate(len, wid, hig, color=0x0000FF, wireframe=false) {
				var pivotg = new THREE.BoxGeometry(0.01,0.01,0.01);
				var pivotm = new THREE.MeshBasicMaterial({ color:0xFF0000, wireframe:true});
				var pivot = new THREE.Mesh(pivotg, pivotm);
				
				fingerg = new THREE.BoxGeometry(len,wid,hig);
				var fingerm = new THREE.MeshStandardMaterial({ color:color, wireframe:wireframe});
				finger = new THREE.Mesh(fingerg, fingerm);
				pivot.add(finger);
				finger.position.y += wid/2;
				var pivot_template = pivot.clone()
				return pivot_template
			}

			var box = makePivotTemplate(1,1,1)
			scene.add(box)
			box.visible = true //can set box visibility
			//box.position.x += 1

		</script>

		<script>
			    function setupKeyControls() {
      var cube = box
      document.onkeydown = function(e) {
        switch (e.keyCode) {
          case 37:
          cube.rotation.x += 0.1;
          break;
          case 38:
          cube.rotation.z -= 0.1;
          break;
          case 39:
          cube.rotation.x -= 0.1;
          break;
          case 40:
          cube.rotation.z += 0.1;
          break;
        }
      };
    }
		</script>
		<script>
			var update = function(){
				//scene.rotation.y += 0.1;
			}
			var render = function(){
				renderer.render(scene, camera);
			}
			var GameLoop = function(){
				requestAnimationFrame(GameLoop);
				update();
				render();
			}
			setupKeyControls()
			GameLoop();
		</script>
	</body>
</html>