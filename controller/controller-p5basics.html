<html>
	<head>
		<title>Felipe</title>
		<style>
			body { margin: 0; }
			canvas {width: 100%; height: 100%}
		</style>
	</head>

	<body>
		<script src="../js/src/p5.js"></script>
		<script src="controller.js"></script>
		<script>
			function setup() {
				createCanvas(windowWidth, windowHeight);
				
				background(220);
			}

			function draw() {
				background(220);
				noFill()
				rect(width/2, 0, width/2, height)
				if(getRaw(0)){
					var loc = [width/2, i]
					var controller = getRaw(i)
					text(controller.id, loc[0], loc[1] + 15)
					controller.buttons.forEach((button, i) => { text(button.pressed ? 1 : 0, loc[0] + 15 + 10*i, loc[1] + 30) })
					controller.axes.forEach((axis, i) => {text(axis, loc[0] + 15, loc[1]+45+15*i)})
				}
				for(var i = 0; i < getNumGamepads(); i++){
					if(getRaw(i)){
						push()
						translate(width/2, height/getNumGamepads() * i)
						var controller = getRaw(i)
						var loc = [0,0]
						console.log(controller.id)
						stroke(0)
						text(controller.id, loc[0], loc[1] + 15)
						controller.buttons.forEach((button, i) => { text(button.pressed ? 1 : 0, loc[0] + 15 + 10*i, loc[1] + 30) })
						controller.axes.forEach((axis, i) => {text(axis.toFixed(3), loc[0] + 15 + (i%2)*50, loc[1]+45+ 15*(floor(i/2)))})
						pop()
					}
					var myinputs = getControls(i);
					console.log(myinputs)
					myinputs.buttons.forEach((button, index) => {
						noFill()
						if(button){
							fill(100,0,0)
						}
						var rectSize = 25
						rect(index*rectSize, i*rectSize, rectSize, rectSize)
					})
				}
				var myinputs = getControls(0);
				
				
			}

			function windowResized() {
				resizeCanvas(windowWidth, windowHeight);
			}
		</script>
	</body>
</html>